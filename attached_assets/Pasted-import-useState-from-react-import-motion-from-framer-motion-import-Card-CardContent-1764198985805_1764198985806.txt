import { useState } from "react";
import { motion } from "framer-motion";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { useLocation } from "wouter";
import {
  TrendingUp,
  Shield,
  Coins,
  RefreshCw,
  Zap,
  Lock,
  ArrowRight,
  BarChart3,
  DollarSign,
  Building2,
  Users,
  Percent,
  Globe,
  Activity,
  Wallet,
  PiggyBank,
  LineChart,
  Target,
  CheckCircle
} from "lucide-react";

const nexusStats = [
  { label: "Total Value Locked", value: "$12.4M", change: "+8.2%", icon: Lock },
  { label: "Active Investors", value: "2,847", change: "+156", icon: Users },
  { label: "Average APY", value: "12.8%", change: "+0.4%", icon: Percent },
  { label: "Properties Tokenized", value: "24", change: "+3", icon: Building2 },
];

const defiProducts = [
  {
    id: "staking",
    title: "CRE Staking",
    description: "Stake your tokenized real estate assets to earn passive yield from rental income and appreciation.",
    apy: "8-15%",
    tvl: "$4.2M",
    icon: PiggyBank,
    features: ["Daily rewards", "No lock-up periods", "Auto-compound"],
    color: "from-[#D4A024]/20 to-[#B8860B]/20"
  },
  {
    id: "lending",
    title: "Property-Backed Lending",
    description: "Borrow against your tokenized property holdings with competitive rates and flexible terms.",
    apy: "4-8%",
    tvl: "$3.8M",
    icon: DollarSign,
    features: ["Up to 70% LTV", "Instant liquidity", "No credit checks"],
    color: "from-blue-500/20 to-blue-600/20"
  },
  {
    id: "farming",
    title: "Yield Farming",
    description: "Provide liquidity to CRE-USDC pools and earn enhanced yields plus CTZ governance tokens.",
    apy: "15-25%",
    tvl: "$2.1M",
    icon: Zap,
    features: ["Dual rewards", "LP incentives", "CTZ airdrops"],
    color: "from-green-500/20 to-green-600/20"
  },
  {
    id: "vaults",
    title: "Smart Vaults",
    description: "Automated yield optimization strategies across multiple property pools for maximum returns.",
    apy: "10-18%",
    tvl: "$2.3M",
    icon: Target,
    features: ["Auto-rebalancing", "Risk-adjusted", "Gas optimized"],
    color: "from-purple-500/20 to-purple-600/20"
  }
];

const securityFeatures = [
  {
    title: "Audited Smart Contracts",
    description: "All contracts audited by leading security firms including CertiK and OpenZeppelin.",
    icon: Shield
  },
  {
    title: "Multi-Sig Treasury",
    description: "Protocol funds secured by 4-of-7 multi-signature wallet with timelocked transactions.",
    icon: Lock
  },
  {
    title: "Real Estate Collateral",
    description: "Every token backed by verified commercial real estate assets with clear title.",
    icon: Building2
  },
  {
    title: "Insurance Coverage",
    description: "Smart contract coverage through Nexus Mutual and property insurance through traditional carriers.",
    icon: CheckCircle
  }
];

const pools = [
  {
    name: "CRE-USDC",
    tvl: "$2.4M",
    apy: "14.2%",
    volume24h: "$182K",
    type: "Liquidity Pool"
  },
  {
    name: "The Axis Vault",
    tvl: "$1.8M",
    apy: "11.8%",
    volume24h: "$94K",
    type: "Property Vault"
  },
  {
    name: "Multi-Property Index",
    tvl: "$3.2M",
    apy: "9.6%",
    volume24h: "$156K",
    type: "Index Fund"
  },
  {
    name: "CREUSD Stability",
    tvl: "$5.0M",
    apy: "6.2%",
    volume24h: "$412K",
    type: "Stablecoin Pool"
  }
];

export default function Nexus() {
  const [, setLocation] = useLocation();
  const [activeTab, setActiveTab] = useState("overview");

  return (
    <div className="min-h-screen bg-gradient-to-br from-background via-background to-muted/20">
      {/* Hero Section */}
      <section className="relative overflow-hidden py-20">
        <div className="absolute inset-0 bg-gradient-to-br from-[#D4A024]/5 via-transparent to-[#B8860B]/5" />
        <div className="container mx-auto px-4 relative z-10">
          <motion.div
            initial={{ opacity: 0, y: 30 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.8 }}
            className="text-center max-w-4xl mx-auto"
          >
            <div className="flex items-center justify-center mb-6">
              <motion.div
                animate={{ rotate: 360 }}
                transition={{ duration: 20, repeat: Infinity, ease: "linear" }}
                className="w-20 h-20 bg-gradient-to-br from-[#D4A024] to-[#B8860B] rounded-full flex items-center justify-center"
              >
                <RefreshCw className="w-10 h-10 text-white" />
              </motion.div>
            </div>
            <Badge className="mb-4 bg-[#D4A024]/10 text-[#D4A024] border-[#D4A024]">
              DeFi Protocol
            </Badge>
            <h1 className="text-5xl md:text-6xl font-light mb-6 bg-gradient-to-r from-[#D4A024] to-[#B8860B] bg-clip-text text-transparent">
              Nexus
            </h1>
            <p className="text-xl text-muted-foreground mb-4 font-light">
              The Liquidity Engine for Tokenized Real Estate
            </p>
            <p className="text-lg text-muted-foreground max-w-2xl mx-auto mb-8">
              Unlock instant liquidity from your property investments. Stake, lend, borrow, 
              and earn yield on tokenized commercial real estate assets.
            </p>
            <div className="flex flex-wrap justify-center gap-4">
              <Button 
                size="lg" 
                className="bg-[#D4A024] hover:bg-[#B8860B] text-white"
                onClick={() => setLocation('/portfolio')}
              >
                Launch App
                <ArrowRight className="ml-2 h-4 w-4" />
              </Button>
              <Button 
                size="lg" 
                variant="outline"
                className="border-[#D4A024] text-[#D4A024] hover:bg-[#D4A024]/10"
              >
                View Documentation
              </Button>
            </div>
          </motion.div>
        </div>
      </section>

      {/* Stats Section */}
      <section className="py-12 border-y border-[#D4A024]/20">
        <div className="container mx-auto px-4">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
            {nexusStats.map((stat, index) => (
              <motion.div
                key={stat.label}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: index * 0.1 }}
              >
                <Card className="bg-card/50 backdrop-blur-sm border-[#D4A024]/30 text-center">
                  <CardContent className="pt-6">
                    <stat.icon className="w-8 h-8 text-[#D4A024] mx-auto mb-3" />
                    <div className="text-3xl font-light mb-1">{stat.value}</div>
                    <div className="text-sm text-muted-foreground mb-2">{stat.label}</div>
                    <Badge variant="secondary" className="text-green-600 bg-green-100">
                      {stat.change}
                    </Badge>
                  </CardContent>
                </Card>
              </motion.div>
            ))}
          </div>
        </div>
      </section>

      {/* Main Content with Tabs */}
      <section className="py-16">
        <div className="container mx-auto px-4">
          <Tabs value={activeTab} onValueChange={setActiveTab} className="w-full">
            <TabsList className="grid w-full max-w-2xl mx-auto grid-cols-4 mb-12">
              <TabsTrigger value="overview">Overview</TabsTrigger>
              <TabsTrigger value="products">Products</TabsTrigger>
              <TabsTrigger value="pools">Pools</TabsTrigger>
              <TabsTrigger value="security">Security</TabsTrigger>
            </TabsList>

            {/* Overview Tab */}
            <TabsContent value="overview">
              <div className="max-w-4xl mx-auto">
                <motion.div
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                >
                  <Card className="bg-gradient-to-br from-[#D4A024]/5 to-[#D4A024]/10 border-2 border-[#D4A024] mb-8">
                    <CardContent className="p-8">
                      <h2 className="text-2xl font-light mb-4">What is Nexus?</h2>
                      <p className="text-muted-foreground mb-6 leading-relaxed">
                        Nexus is Commertize's decentralized finance protocol â€” a liquidity engine enabling 
                        investors to borrow, lend, and earn yield from tokenized real estate (RWA) assets. 
                        Built on Ethereum, Nexus bridges traditional property value with DeFi lending pools, 
                        providing instant liquidity without selling your assets.
                      </p>
                      <div className="grid md:grid-cols-3 gap-6">
                        <div className="flex items-start space-x-3">
                          <Wallet className="w-6 h-6 text-[#D4A024] mt-1" />
                          <div>
                            <h4 className="font-medium mb-1">Instant Liquidity</h4>
                            <p className="text-sm text-muted-foreground">Access funds without selling your property tokens</p>
                          </div>
                        </div>
                        <div className="flex items-start space-x-3">
                          <LineChart className="w-6 h-6 text-[#D4A024] mt-1" />
                          <div>
                            <h4 className="font-medium mb-1">Passive Yield</h4>
                            <p className="text-sm text-muted-foreground">Earn from rental income and DeFi rewards</p>
                          </div>
                        </div>
                        <div className="flex items-start space-x-3">
                          <Globe className="w-6 h-6 text-[#D4A024] mt-1" />
                          <div>
                            <h4 className="font-medium mb-1">24/7 Markets</h4>
                            <p className="text-sm text-muted-foreground">Trade and stake anytime, anywhere</p>
                          </div>
                        </div>
                      </div>
                    </CardContent>
                  </Card>

                  {/* How It Works */}
                  <h3 className="text-2xl font-light mb-6 text-center">How Nexus Works</h3>
                  <div className="grid md:grid-cols-4 gap-4 mb-12">
                    {[
                      { step: "1", title: "Connect Wallet", desc: "Link your Web3 wallet to access Nexus" },
                      { step: "2", title: "Deposit Assets", desc: "Stake property tokens or stablecoins" },
                      { step: "3", title: "Earn Yield", desc: "Receive rewards from protocol fees" },
                      { step: "4", title: "Withdraw Anytime", desc: "Access your funds when you need them" }
                    ].map((item, index) => (
                      <motion.div
                        key={item.step}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: index * 0.1 }}
                      >
                        <Card className="text-center h-full border-[#D4A024]/30">
                          <CardContent className="pt-6">
                            <div className="w-12 h-12 bg-[#D4A024] text-white rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-light">
                              {item.step}
                            </div>
                            <h4 className="font-medium mb-2">{item.title}</h4>
                            <p className="text-sm text-muted-foreground">{item.desc}</p>
                          </CardContent>
                        </Card>
                      </motion.div>
                    ))}
                  </div>
                </motion.div>
              </div>
            </TabsContent>

            {/* Products Tab */}
            <TabsContent value="products">
              <div className="grid md:grid-cols-2 gap-6 max-w-5xl mx-auto">
                {defiProducts.map((product, index) => (
                  <motion.div
                    key={product.id}
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: index * 0.1 }}
                  >
                    <Card className={`h-full bg-gradient-to-br ${product.color} border-2 border-[#D4A024]/30 hover:border-[#D4A024] transition-all duration-300`}>
                      <CardHeader>
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <div className="w-12 h-12 bg-[#D4A024]/20 rounded-full flex items-center justify-center">
                              <product.icon className="w-6 h-6 text-[#D4A024]" />
                            </div>
                            <CardTitle className="text-xl font-light">{product.title}</CardTitle>
                          </div>
                          <Badge className="bg-[#D4A024] text-white">
                            {product.apy} APY
                          </Badge>
                        </div>
                      </CardHeader>
                      <CardContent>
                        <p className="text-muted-foreground mb-4">{product.description}</p>
                        <div className="flex items-center justify-between mb-4">
                          <span className="text-sm text-muted-foreground">TVL</span>
                          <span className="font-medium">{product.tvl}</span>
                        </div>
                        <div className="space-y-2 mb-4">
                          {product.features.map((feature) => (
                            <div key={feature} className="flex items-center text-sm">
                              <CheckCircle className="w-4 h-4 text-green-500 mr-2" />
                              {feature}
                            </div>
                          ))}
                        </div>
                        <Button className="w-full bg-[#D4A024] hover:bg-[#B8860B] text-white">
                          Enter {product.title}
                        </Button>
                      </CardContent>
                    </Card>
                  </motion.div>
                ))}
              </div>
            </TabsContent>

            {/* Pools Tab */}
            <TabsContent value="pools">
              <div className="max-w-4xl mx-auto">
                <Card className="border-2 border-[#D4A024]">
                  <CardHeader>
                    <div className="flex items-center justify-between">
                      <CardTitle className="text-xl font-light">Active Pools</CardTitle>
                      <Badge variant="outline" className="border-[#D4A024] text-[#D4A024]">
                        Live
                      </Badge>
                    </div>
                  </CardHeader>
                  <CardContent>
                    <div className="overflow-x-auto">
                      <table className="w-full">
                        <thead>
                          <tr className="border-b border-[#D4A024]/20">
                            <th className="text-left py-4 px-2 font-medium">Pool</th>
                            <th className="text-left py-4 px-2 font-medium">Type</th>
                            <th className="text-right py-4 px-2 font-medium">TVL</th>
                            <th className="text-right py-4 px-2 font-medium">APY</th>
                            <th className="text-right py-4 px-2 font-medium">24h Volume</th>
                            <th className="text-right py-4 px-2 font-medium">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          {pools.map((pool, index) => (
                            <motion.tr
                              key={pool.name}
                              initial={{ opacity: 0 }}
                              animate={{ opacity: 1 }}
                              transition={{ delay: index * 0.1 }}
                              className="border-b border-[#D4A024]/10 hover:bg-[#D4A024]/5"
                            >
                              <td className="py-4 px-2">
                                <div className="flex items-center space-x-2">
                                  <div className="w-8 h-8 bg-[#D4A024]/20 rounded-full flex items-center justify-center">
                                    <Coins className="w-4 h-4 text-[#D4A024]" />
                                  </div>
                                  <span className="font-medium">{pool.name}</span>
                                </div>
                              </td>
                              <td className="py-4 px-2">
                                <Badge variant="secondary">{pool.type}</Badge>
                              </td>
                              <td className="py-4 px-2 text-right font-medium">{pool.tvl}</td>
                              <td className="py-4 px-2 text-right text-green-600 font-medium">{pool.apy}</td>
                              <td className="py-4 px-2 text-right text-muted-foreground">{pool.volume24h}</td>
                              <td className="py-4 px-2 text-right">
                                <Button size="sm" variant="outline" className="border-[#D4A024] text-[#D4A024]">
                                  Deposit
                                </Button>
                              </td>
                            </motion.tr>
                          ))}
                        </tbody>
                      </table>
                    </div>
                  </CardContent>
                </Card>
              </div>
            </TabsContent>

            {/* Security Tab */}
            <TabsContent value="security">
              <div className="max-w-4xl mx-auto">
                <motion.div
                  initial={{ opacity: 0 }}
                  animate={{ opacity: 1 }}
                >
                  <Card className="bg-gradient-to-br from-[#D4A024]/5 to-[#D4A024]/10 border-2 border-[#D4A024] mb-8">
                    <CardContent className="p-8 text-center">
                      <Shield className="w-16 h-16 text-[#D4A024] mx-auto mb-4" />
                      <h2 className="text-2xl font-light mb-4">Security First</h2>
                      <p className="text-muted-foreground max-w-2xl mx-auto">
                        Nexus operates via audited smart contracts with built-in risk parameters 
                        and collateralization ratios to ensure platform integrity. Your assets are 
                        protected by multiple layers of security.
                      </p>
                    </CardContent>
                  </Card>

                  <div className="grid md:grid-cols-2 gap-6">
                    {securityFeatures.map((feature, index) => (
                      <motion.div
                        key={feature.title}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: index * 0.1 }}
                      >
                        <Card className="h-full border-[#D4A024]/30">
                          <CardContent className="pt-6">
                            <div className="flex items-start space-x-4">
                              <div className="w-12 h-12 bg-[#D4A024]/20 rounded-full flex items-center justify-center flex-shrink-0">
                                <feature.icon className="w-6 h-6 text-[#D4A024]" />
                              </div>
                              <div>
                                <h4 className="font-medium mb-2">{feature.title}</h4>
                                <p className="text-sm text-muted-foreground">{feature.description}</p>
                              </div>
                            </div>
                          </CardContent>
                        </Card>
                      </motion.div>
                    ))}
                  </div>
                </motion.div>
              </div>
            </TabsContent>
          </Tabs>
        </div>
      </section>

      {/* CTA Section */}
      <section className="py-20 bg-gradient-to-br from-[#D4A024]/10 to-[#B8860B]/10">
        <div className="container mx-auto px-4 text-center">
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
          >
            <h2 className="text-3xl md:text-4xl font-light mb-4">
              Ready to Unlock Your Property's Potential?
            </h2>
            <p className="text-muted-foreground mb-8 max-w-2xl mx-auto">
              Join thousands of investors earning passive yield on their tokenized real estate holdings.
            </p>
            <div className="flex flex-wrap justify-center gap-4">
              <Button 
                size="lg" 
                className="bg-[#D4A024] hover:bg-[#B8860B] text-white"
                onClick={() => setLocation('/portfolio')}
              >
                Start Earning
                <ArrowRight className="ml-2 h-4 w-4" />
              </Button>
              <Button 
                size="lg" 
                variant="outline"
                className="border-[#D4A024] text-[#D4A024]"
                onClick={() => setLocation('/faq')}
              >
                Learn More
              </Button>
            </div>
          </motion.div>
        </div>
      </section>
    </div>
  );
}